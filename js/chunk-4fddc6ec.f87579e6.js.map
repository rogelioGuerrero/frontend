{"version":3,"sources":["webpack:///./src/composables/addpage.js","webpack:///./src/pages/datosprueba/add.vue","webpack:///./src/pages/datosprueba/add.vue?f4df"],"names":["useAddPage","props","formData","v$","beforeSubmit","afterSubmit","app","useApp","store","useStore","state","reactive","id","pageReady","submitted","saving","errorMsg","setFormDefaultValues","apiUrl","computed","apiPath","validateForm","value","$validate","$invalid","normalizedFormData","Array","isArray","payload","forEach","obj","Object","keys","key","toString","submitForm","undefined","flashMsg","formValidationError","formValidationMsg","url","data","dispatch","pageName","response","closeDialogs","showPageRequestError","storeFormData","getters","pageData","formDefaultValues","assign","getErrorClass","field","index","isInvalid","$each","$response","$errors","length","isFieldValid","getFieldError","fieldErrors","$silentErrors","$message","watch","current","deep","immediate","onMounted","computedProps","methods","type","default","routeName","submitButtonLabel","msgAfterSave","showHeader","showSubmitButton","redirect","isSubPage","setup","categoria","ciudad","estado","fabricante","fecha_envio","fecha_pedido","forma_envio","id_pedido","cliente","producto","paisregion","region","segmento","subcategoria","cantidad","descuento","ganancia","numero_registros","relacion_ganancias","total","rules","useVuelidate","page","navigateTo","toRefs","pageTitle","setPageTitle","expose","ref","tag","onSubmit","class","modelValue","modelModifiers","trim","label","placeholder","icon","loading","__exports__"],"mappings":"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","file":"js/chunk-4fddc6ec.f87579e6.js","sourcesContent":["import { reactive, computed, onMounted, watch } from \"vue\";\r\n\r\nimport { useApp } from '@/composables/app';\r\nimport { useStore } from 'vuex';\r\n\r\n\r\nexport function useAddPage({props, formData, v$, beforeSubmit, afterSubmit}) {\r\n\tconst app = useApp();\r\n\tconst store = useStore();\r\n\tconst state = reactive({\r\n\t\tid: null,\r\n\t\tpageReady: false,\r\n\t\tsubmitted: false,\r\n\t\tsaving: false,\r\n\t\terrorMsg: ''\r\n\t});\r\n\r\n\tsetFormDefaultValues();\r\n\r\n\tconst apiUrl = computed(() => {\r\n\t\treturn props.apiPath\r\n\t});\r\n\r\n\tfunction validateForm(){\r\n\t\tstate.submitted = true;\r\n\t\tv$.value.$validate();\r\n\t\tif(v$.value.$invalid){\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction normalizedFormData(){\r\n\t\tif(Array.isArray(formData)){ // for multi form data\r\n\t\t\tconst payload = [...formData];\r\n\t\t\tpayload.forEach(function(obj){\r\n\t\t\t\tObject.keys(obj).forEach(function(key){\r\n\t\t\t\t\tif(Array.isArray(obj[key])){\r\n\t\t\t\t\t\tobj[key] = obj[key].toString()\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn payload;\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconst payload = {...formData};\r\n\t\t\tObject.keys(payload).forEach(function(key){\r\n\t\t\t\tif(Array.isArray(payload[key])){\r\n\t\t\t\t\tpayload[key] = payload[key].toString()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn payload;\r\n\t\t}\r\n\t}\r\n\r\n\tasync function submitForm(){\r\n\t\tstate.submitted = true;\r\n\t\tif(beforeSubmit !== undefined){\r\n\t\t\tif(!beforeSubmit()){ return; }\r\n\t\t}\r\n\r\n\t\tif(!validateForm()){\r\n\t\t\tapp.flashMsg(props.formValidationError, props.formValidationMsg, \"error\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\r\n\t\tstate.saving = true;\r\n\t\tconst url = apiUrl.value;\r\n\t\tconst payload = normalizedFormData();\r\n\t\tlet data = { url, payload }\r\n\t\ttry{\r\n\t\t\tconst response = await store.dispatch(`${props.pageName}/saveRecord`, data);\r\n\t\t\tapp.closeDialogs();// hide dialog if form is submitted via modal\r\n\t\t\tif(afterSubmit){\r\n\t\t\t\tafterSubmit(response)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tapp.showPageRequestError(err);\r\n\t\t}\r\n\t\tfinally{\r\n\t\t\tstate.submitted = false;\r\n\t\t\tstate.saving = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setFormDefaultValues(){\r\n\t\tconst storeFormData = computed (()=> store.getters[`${props.pageName}/formData`]); // from data from store\r\n\t\tconst pageData = props.pageData; // when form default values is passed by component props\r\n\t\tconst formDefaultValues = { ...pageData, ...storeFormData.value };\r\n\t\t\r\n\t\tif(!Array.isArray(formData)){\r\n\t\t\tObject.assign(formData, formDefaultValues); //reset form data\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction getErrorClass(field, index){\r\n\t\tlet isInvalid = false;\r\n\t\tif(index === undefined){\r\n\t\t\tisInvalid = v$.value[field].$invalid && state.submitted;\r\n\t\t}\r\n\t\t//for multi form validation\r\n\t\telse if(v$.value.$each.$response.$errors[index][field].length && state.submitted){\r\n\t\t\tisInvalid = true;\r\n\t\t}\r\n\t\treturn {\"p-invalid\": isInvalid };\r\n\t}\r\n\r\n\tfunction isFieldValid(field, index){\r\n\t\tif(index===undefined){\r\n\t\t\treturn v$.value[field].$invalid && state.submitted;\t\r\n\t\t}\r\n\t\telse if(v$.value.$each.$response.$errors[index][field].length && state.submitted){\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\r\n\tfunction getFieldError(field, index){\r\n\t\tlet fieldErrors = null;\r\n\t\tif(index===undefined){\r\n\t\t\tfieldErrors = v$.value[field].$silentErrors;\r\n\t\t\tif(fieldErrors.length){\r\n\t\t\t\treturn fieldErrors[0].$message; //return the first error\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tfieldErrors = v$.value.$each.$response.$errors[index][field];\r\n\t\t\tif(fieldErrors.length){\r\n\t\t\t\treturn fieldErrors[0].$message; //return the first error\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null\r\n\t}\r\n\t\r\n\t\r\n\twatch(() => props.pageData, (current) => {\r\n\t\tObject.assign(formData, current);\r\n\t  },\r\n\t  { deep: true, immediate: true }\r\n  \t);\r\n\r\n\tonMounted(()=>{ \r\n\t\tstate.pageReady = true;\r\n\t});\r\n\r\n\tconst computedProps = {\r\n\t\tapiUrl,\r\n\t}\r\n\r\n\tconst methods = {\r\n\t\tsubmitForm,\r\n\t\tgetErrorClass,\r\n\t\tgetFieldError,\r\n\t\tisFieldValid\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tvalidateForm,\r\n\t\tsetFormDefaultValues,\r\n\t\tformData,\r\n\t\tstate,\r\n\t\tcomputedProps,\r\n\t\tmethods\r\n\t}\r\n\r\n}","<template>\r\n    <div class=\"main-page\">\r\n        <template v-if=\"showHeader\">\r\n            <section class=\"page-section mb-3\" >\r\n                <div class=\"container\">\r\n                    <div class=\"grid justify-content-between\">\r\n                        <div class=\"col \" >\r\n                            <div class=\"\">\r\n                                <div class=\" text-2xl text-primary font-bold\" >\r\n                                    Agregar nuevo\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </template>\r\n        <section class=\"page-section \" >\r\n            <div class=\"container\">\r\n                <div class=\"grid \">\r\n                    <div class=\"md:col-9 sm:col-12 comp-grid\" >\r\n                        <div class=\"\">\r\n                            <div class=\"\">\r\n                                <div >\r\n                                    <form ref=\"observer\" tag=\"form\" @submit.prevent=\"submitForm()\" class=\"\" :class=\"{ 'card': !isSubPage }\">\r\n                                        <div class=\"grid\">\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Categoria \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlcategoria\" v-model.trim=\"formData.categoria\"  label=\"Categoria\" type=\"text\" placeholder=\"Escribir Categoria\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('categoria')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('categoria')\" class=\"p-error\">{{ getFieldError('categoria') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Ciudad \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlciudad\" v-model.trim=\"formData.ciudad\"  label=\"Ciudad\" type=\"text\" placeholder=\"Escribir Ciudad\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('ciudad')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('ciudad')\" class=\"p-error\">{{ getFieldError('ciudad') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Estado \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlestado\" v-model.trim=\"formData.estado\"  label=\"Estado\" type=\"text\" placeholder=\"Escribir Estado\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('estado')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('estado')\" class=\"p-error\">{{ getFieldError('estado') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Fabricante \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlfabricante\" v-model.trim=\"formData.fabricante\"  label=\"Fabricante\" type=\"text\" placeholder=\"Escribir Fabricante\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('fabricante')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('fabricante')\" class=\"p-error\">{{ getFieldError('fabricante') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Fecha Envio \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlfecha_envio\" v-model.trim=\"formData.fecha_envio\"  label=\"Fecha Envio\" type=\"text\" placeholder=\"Escribir Fecha Envio\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('fecha_envio')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('fecha_envio')\" class=\"p-error\">{{ getFieldError('fecha_envio') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Fecha Pedido \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlfecha_pedido\" v-model.trim=\"formData.fecha_pedido\"  label=\"Fecha Pedido\" type=\"text\" placeholder=\"Escribir Fecha Pedido\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('fecha_pedido')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('fecha_pedido')\" class=\"p-error\">{{ getFieldError('fecha_pedido') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Forma Envio \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlforma_envio\" v-model.trim=\"formData.forma_envio\"  label=\"Forma Envio\" type=\"text\" placeholder=\"Escribir Forma Envio\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('forma_envio')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('forma_envio')\" class=\"p-error\">{{ getFieldError('forma_envio') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Id Pedido \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlid_pedido\" v-model.trim=\"formData.id_pedido\"  label=\"Id Pedido\" type=\"text\" placeholder=\"Escribir Id Pedido\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('id_pedido')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('id_pedido')\" class=\"p-error\">{{ getFieldError('id_pedido') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Cliente \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlcliente\" v-model.trim=\"formData.cliente\"  label=\"Cliente\" type=\"text\" placeholder=\"Escribir Cliente\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('cliente')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('cliente')\" class=\"p-error\">{{ getFieldError('cliente') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Producto \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlproducto\" v-model.trim=\"formData.producto\"  label=\"Producto\" type=\"text\" placeholder=\"Escribir Producto\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('producto')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('producto')\" class=\"p-error\">{{ getFieldError('producto') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Paisregion \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlpaisregion\" v-model.trim=\"formData.paisregion\"  label=\"Paisregion\" type=\"text\" placeholder=\"Escribir Paisregion\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('paisregion')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('paisregion')\" class=\"p-error\">{{ getFieldError('paisregion') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Region \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlregion\" v-model.trim=\"formData.region\"  label=\"Region\" type=\"text\" placeholder=\"Escribir Region\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('region')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('region')\" class=\"p-error\">{{ getFieldError('region') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Segmento \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlsegmento\" v-model.trim=\"formData.segmento\"  label=\"Segmento\" type=\"text\" placeholder=\"Escribir Segmento\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('segmento')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('segmento')\" class=\"p-error\">{{ getFieldError('segmento') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Subcategoria \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlsubcategoria\" v-model.trim=\"formData.subcategoria\"  label=\"Subcategoria\" type=\"text\" placeholder=\"Escribir Subcategoria\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('subcategoria')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('subcategoria')\" class=\"p-error\">{{ getFieldError('subcategoria') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Cantidad \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlcantidad\" v-model.trim=\"formData.cantidad\"  label=\"Cantidad\" type=\"text\" placeholder=\"Escribir Cantidad\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('cantidad')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('cantidad')\" class=\"p-error\">{{ getFieldError('cantidad') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Descuento \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrldescuento\" v-model.trim=\"formData.descuento\"  label=\"Descuento\" type=\"text\" placeholder=\"Escribir Descuento\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('descuento')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('descuento')\" class=\"p-error\">{{ getFieldError('descuento') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Ganancia \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlganancia\" v-model.trim=\"formData.ganancia\"  label=\"Ganancia\" type=\"text\" placeholder=\"Escribir Ganancia\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('ganancia')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('ganancia')\" class=\"p-error\">{{ getFieldError('ganancia') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Numero Registros \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlnumero_registros\" v-model.trim=\"formData.numero_registros\"  label=\"Numero Registros\" type=\"text\" placeholder=\"Escribir Numero Registros\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('numero_registros')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('numero_registros')\" class=\"p-error\">{{ getFieldError('numero_registros') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Relacion Ganancias \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrlrelacion_ganancias\" v-model.trim=\"formData.relacion_ganancias\"  label=\"Relacion Ganancias\" type=\"text\" placeholder=\"Escribir Relacion Ganancias\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('relacion_ganancias')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('relacion_ganancias')\" class=\"p-error\">{{ getFieldError('relacion_ganancias') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-12\">\r\n                                                <div class=\"formgrid grid\">\r\n                                                    <div class=\"col-12 md:col-3\">\r\n                                                        Total \r\n                                                    </div>\r\n                                                    <div class=\"col-12 md:col-9\">\r\n                                                        <InputText ref=\"ctrltotal\" v-model.trim=\"formData.total\"  label=\"Total\" type=\"text\" placeholder=\"Escribir Total\"      \r\n                                                        class=\" w-full\" :class=\"getErrorClass('total')\">\r\n                                                        </InputText>\r\n                                                        <small v-if=\"isFieldValid('total')\" class=\"p-error\">{{ getFieldError('total') }}</small> \r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div v-if=\"showSubmitButton\" class=\"text-center my-3\">\r\n                                            <Button class=\"p-button-primary\" type=\"submit\" label=\"Entregar\" icon=\"pi pi-send\" :loading=\"saving\" />\r\n                                        </div>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n<script setup>\r\n\timport {  computed,  reactive, toRefs, onMounted } from 'vue';\r\n\timport useVuelidate from '@vuelidate/core';\r\n\timport { required } from '@/services/validators';\r\n\timport { useApp } from '@/composables/app.js';\r\n\timport { useAddPage } from '@/composables/addpage.js';\r\n\tconst props = defineProps({\r\n\t\tpageName : {\r\n\t\t\ttype : String,\r\n\t\t\tdefault : 'datosprueba',\r\n\t\t},\r\n\t\trouteName : {\r\n\t\t\ttype : String,\r\n\t\t\tdefault : 'datospruebaadd',\r\n\t\t},\r\n\t\tapiPath : {\r\n\t\t\ttype : String,\r\n\t\t\tdefault : 'datosprueba/add',\r\n\t\t},\r\n\t\tsubmitButtonLabel: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Entregar\",\r\n\t\t},\r\n\t\tformValidationError: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"El formulario no es válido\",\r\n\t\t},\r\n\t\tformValidationMsg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Por favor complete el formulario\",\r\n\t\t},\r\n\t\tmsgAfterSave: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Grabar agregado exitosamente\",\r\n\t\t},\r\n\t\tshowHeader: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tshowSubmitButton: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tredirect: {\r\n\t\t\ttype : Boolean,\r\n\t\t\tdefault : true,\r\n\t\t},\r\n\t\tisSubPage: {\r\n\t\t\ttype : Boolean,\r\n\t\t\tdefault : false,\r\n\t\t},\r\n\t\tpageData: { // use to set formData default values from another page\r\n\t\t\ttype: Object,\r\n\t\t\tdefault: () => {} \r\n\t\t},\r\n\t});\r\n\tconst app = useApp();\r\n\tconst formDefaultValues = {\r\n\t\tcategoria: \"\", \r\n\t\tciudad: \"\", \r\n\t\testado: \"\", \r\n\t\tfabricante: \"\", \r\n\t\tfecha_envio: \"\", \r\n\t\tfecha_pedido: \"\", \r\n\t\tforma_envio: \"\", \r\n\t\tid_pedido: \"\", \r\n\t\tcliente: \"\", \r\n\t\tproducto: \"\", \r\n\t\tpaisregion: \"\", \r\n\t\tregion: \"\", \r\n\t\tsegmento: \"\", \r\n\t\tsubcategoria: \"\", \r\n\t\tcantidad: \"\", \r\n\t\tdescuento: \"\", \r\n\t\tganancia: \"\", \r\n\t\tnumero_registros: \"\", \r\n\t\trelacion_ganancias: \"\", \r\n\t\ttotal: \"\", \r\n\t};\r\n\tconst formData = reactive({ ...formDefaultValues });\r\n\t//form validation rules\r\n\tconst rules = computed(() => {\r\n\t\treturn {\r\n\t\t\tcategoria: {  },\r\n\t\t\tciudad: {  },\r\n\t\t\testado: {  },\r\n\t\t\tfabricante: {  },\r\n\t\t\tfecha_envio: {  },\r\n\t\t\tfecha_pedido: {  },\r\n\t\t\tforma_envio: {  },\r\n\t\t\tid_pedido: {  },\r\n\t\t\tcliente: {  },\r\n\t\t\tproducto: {  },\r\n\t\t\tpaisregion: {  },\r\n\t\t\tregion: {  },\r\n\t\t\tsegmento: {  },\r\n\t\t\tsubcategoria: {  },\r\n\t\t\tcantidad: {  },\r\n\t\t\tdescuento: {  },\r\n\t\t\tganancia: {  },\r\n\t\t\tnumero_registros: {  },\r\n\t\t\trelacion_ganancias: {  },\r\n\t\t\ttotal: {  }\r\n\t\t}\r\n\t});\r\n\tconst v$ = useVuelidate(rules, formData); // form validation\r\n\tconst page = useAddPage({ props, formData, v$, beforeSubmit, afterSubmit });\r\n\t// perform custom validation before submit form\r\n\t// set custom form fields\r\n\t// return false if validation fails\r\n\tfunction beforeSubmit(){\r\n\t\treturn true;\r\n\t}\r\n\t// after form submited to api\r\n\t// reset form data.\r\n\t// redirect to another page\r\n\tfunction afterSubmit(response) {\r\n\t\tapp.flashMsg(props.msgAfterSave);\r\n\t\tpage.setFormDefaultValues(); //reset form data\r\n\t\tif(props.redirect) app.navigateTo(`/datosprueba`);\r\n\t}\r\n\t//page state\r\n\tconst {\r\n\t\tsubmitted, // form submitted state - Boolean\r\n\t\tsaving, // form api submiting state - Boolean\r\n\t\tpageReady, // if api data loaded successfully\r\n\t} = toRefs(page.state);\r\n\t//page methods\r\n\tconst {\r\n\t\tsubmitForm, //submit form data to api\r\n\t\tgetErrorClass, // return error class if field is invalid- args(fieldname)\r\n\t\tgetFieldError, //  get validation error message - args(fieldname)\r\n\t\tisFieldValid, // check if field is validated - args(fieldname)\r\n\t\t // map api datasource  to Select options label-value\r\n\t} = page.methods;\r\n\tonMounted(()=>{\r\n\t\tconst pageTitle = \"Agregar nuevo\";\r\n\t\tapp.setPageTitle(props.routeName, pageTitle); // set browser page title\r\n\t});\r\n\t// expose page object for other components access\r\n\tdefineExpose({\r\n\t\tpage\r\n\t});\r\n</script>\r\n<style scoped>\r\n</style>\r\n","import script from \"./add.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./add.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}
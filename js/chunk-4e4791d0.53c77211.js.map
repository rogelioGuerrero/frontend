{"version":3,"sources":["webpack:///./src/composables/viewpage.js","webpack:///./src/pages/registro/view.vue","webpack:///./src/pages/registro/view.vue?1055"],"names":["useViewPage","props","app","useApp","route","useRoute","router","useRouter","store","useStore","confirm","useConfirm","state","reactive","id","item","currentRecord","pageReady","loading","deleting","errorMsg","computed","get","getters","pageName","set","value","commit","apiUrl","encodeURIComponent","path","apiPath","query","queryParams","utils","serializeQuery","load","url","dispatch","showPageRequestError","exportPage","exportPageRecords","exportFormats","deleteItem","Array","isArray","map","primaryKey","title","titleBeforeDelete","prompt","msgBeforeDelete","require","message","header","icon","accept","payload","back","isDialogOpen","closeDialogs","flashMsg","msgAfterDelete","response","reject","moveRecord","recid","moveToNextRecord","nextRecordId","moveToPreviousRecord","previousRecordId","watch","computedProps","methods","type","default","routeName","editButton","deleteButton","exportButton","showHeader","showFooter","isSubPage","setup","page","toRefs","getActionMenuModel","data","label","command","event","openPageDialog","closeBtn","onMounted","pageTitle","setPageTitle","class","model","_","style","__exports__"],"mappings":"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","file":"js/chunk-4e4791d0.53c77211.js","sourcesContent":["\r\nimport { reactive, computed, watch } from \"vue\";\r\nimport { utils } from '@/utils';\r\nimport { useApp } from '@/composables/app';\r\nimport { useStore } from 'vuex';\r\nimport { useRoute, useRouter } from 'vue-router';\r\nimport { useConfirm } from 'primevue/useconfirm';\r\n\r\nexport function useViewPage(props) {\r\n\tconst app = useApp();\r\n\tconst route = useRoute();\r\n\tconst router = useRouter();\r\n\tconst store = useStore();\r\n\tconst confirm = useConfirm();\r\n\tconst state = reactive({\r\n\t\tid: false,\r\n\t\titem: null,\r\n\t\tcurrentRecord: null,\r\n\t\tpageReady: false,\r\n\t\tloading: false,\r\n\t\tdeleting: false,\r\n\t\terrorMsg: ''\r\n\t});\r\n\tconst currentRecord = computed ({\r\n\t\tget() {\r\n\t\t\treturn store.getters[`${props.pageName}/currentRecord`];\r\n\t\t},\r\n\t\tset(value) {\r\n\t\t\tstore.commit(`${props.pageName}/setCurrentRecord`, value);\r\n\t\t}\r\n\t});\r\n\r\n\tconst apiUrl = computed(() => {\r\n\t\tlet id = props.id || \"\";\r\n\t\tif(id) id = encodeURIComponent(id);\r\n\t\tlet path = `${props.apiPath}/${id}`;\r\n\t\tlet query = route.query;\r\n\t\tlet queryParams = utils.serializeQuery(query);\r\n\t\tif(queryParams){\r\n\t\t\tpath += \"?\" + queryParams;\r\n\t\t}\r\n\t\treturn path\r\n\t});\r\n\r\n\t async function load() {\r\n\t\tstate.loading = true;\r\n\t\tstate.pageReady = false;\r\n\t\tstate.item = null;\r\n\t\tlet url = apiUrl.value;\r\n\t\ttry{\r\n\t\t\t// fetch currentRecord from api and save in page store\r\n\t\t\tawait store.dispatch(`${props.pageName}/fetchRecord`, url);\r\n\t\t\tconst item = currentRecord.value;\r\n\t\t\tif(item){\r\n\t\t\t\tstate.item = item;\r\n\t\t\t\tstate.pageReady = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch(err){\r\n\t\t\tapp.showPageRequestError(err);\r\n\t\t}\r\n\t\tfinally{\r\n\t\t\tstate.loading = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction exportPage() {\r\n\t\tapp.exportPageRecords(props.exportFormats, apiUrl.value, props.pageName);\r\n\t}\r\n\r\n\tfunction deleteItem (id) {\r\n\t\tif (Array.isArray(id)) {\r\n\t\t\tid = id.map(value => value[props.primaryKey]);\r\n\t\t}\r\n\t\tif (id) {\r\n\t\t\tconst title = props.titleBeforeDelete;\r\n\t\t\tconst prompt = props.msgBeforeDelete;\r\n\t\t\tconfirm.require({\r\n\t\t\t\tmessage: prompt,\r\n\t\t\t\theader: title,\r\n\t\t\t\ticon: 'pi pi-exclamation-triangle',\r\n\t\t\t\taccept: async () => {\r\n\t\t\t\t\tlet url =`${props.pageName}/delete/${id}`;\r\n\t\t\t\t\tlet payload = { id, url };\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\tawait store.dispatch(`${props.pageName}/deleteRecord`, payload);\r\n\t\t\t\t\t\trouter.back();\r\n\t\t\t\t\t\tif(app.isDialogOpen()){\r\n\t\t\t\t\t\t\tapp.closeDialogs()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\trouter.back();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tapp.flashMsg(props.msgAfterDelete);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(e){\r\n\t\t\t\t\t\tapp.showPageRequestError(response);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\treject: () => {\r\n\t\t\t\t\t//callback to execute when user rejects the action\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction moveRecord (recid) {\r\n\t\tlet id = encodeURIComponent(state.id);\r\n\t\tlet path = `/${props.apiPath}/${id}`;\r\n\t\tload(path);\r\n\t}\r\n\r\n\tfunction moveToNextRecord () {\r\n\t\tmoveRecord(state.item.nextRecordId);\r\n\t}\r\n\r\n\tfunction moveToPreviousRecord () {\r\n\t\tmoveRecord(state.item.previousRecordId);\r\n\t}\r\n\r\n\twatch(apiUrl, () => { load(); });\r\n\r\n\tconst computedProps = {\r\n\t\tapiUrl,\r\n\t\tcurrentRecord,\r\n\t}\r\n\tconst methods = {\r\n\t\tload,\r\n\t\tdeleteItem,\r\n\t\tmoveToNextRecord,\r\n\t\tmoveToPreviousRecord,\r\n\t\texportPage,\r\n\t}\r\n\t\r\n\treturn {\r\n\t\tstate,\r\n\t\tcomputedProps,\r\n\t\tmethods,\r\n\t}\r\n\r\n}","<template>\r\n    <div class=\"main-page\">\r\n        <template v-if=\"showHeader\">\r\n            <section class=\"page-section mb-3\" >\r\n                <div class=\"container\">\r\n                    <div class=\"grid justify-content-between\">\r\n                        <div class=\"col \" >\r\n                            <div class=\"\">\r\n                                <div class=\" text-2xl text-primary font-bold\" >\r\n                                    Ver\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </template>\r\n        <section class=\"page-section \" >\r\n            <div class=\"container\">\r\n                <div class=\"grid \">\r\n                    <div class=\"col comp-grid\" >\r\n                        <div class=\"\">\r\n                            <div class=\"\">\r\n                                <div >\r\n                                    <div class=\"relative-position\" style=\"min-height:100px\">\r\n                                        <template v-if=\"pageReady\">\r\n                                            <div class=\"grid\">\r\n                                                <div class=\"col-12\">\r\n                                                    <div class=\"\" :class=\"{ 'card': !isSubPage }\">\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Id: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.id }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Id Cabecera: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.id_cabecera }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Dimension: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.dimension }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Subdimension: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.subdimension }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Componente: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.componente }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Item: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.item }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Medicion: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.medicion }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Base: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.base }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Status: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.status }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Valor: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.valor }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Porcentaje: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.porcentaje }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Comen: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.comen }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Link Evidencias: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.link_evidencias }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Criterios: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.criterios }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Orden Dim: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.orden_dim }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Orden Subdim: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.orden_subdim }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"grid align-items-center\">\r\n                                                            <div class=\"col\">\r\n                                                                Subcriterios: \r\n                                                            </div>\r\n                                                            <div class=\"col font-bold\">{{ item.subcriterios }}</div>\r\n                                                        </div>\r\n                                                        <hr />\r\n                                                        <div class=\"flex  justify-btween\">\r\n                                                            <SplitButton class=\"p-button p-button-raised p-button-text p-button-sm\" :model=\"getActionMenuModel(item)\">\r\n                                                                <i></i>\r\n                                                            </SplitButton>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </template>\r\n                                        <template v-if=\"loading\">\r\n                                            <div class=\"p-3 text-center\">\r\n                                                <ProgressSpinner style=\"width:50px;height:50px\" />\r\n                                            </div>\r\n                                        </template>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</template>\r\n<script setup>\r\n\timport {   toRefs, onMounted } from 'vue';\r\n\timport { useApp } from '@/composables/app.js';\r\n\timport { useViewPage } from '@/composables/viewpage.js';\r\n\tconst props = defineProps({\r\n\t\tid: [String, Number],\r\n\t\tprimaryKey: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'id',\r\n\t\t},\r\n\t\tpageName: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'registro',\r\n\t\t},\r\n\t\trouteName: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'registroview',\r\n\t\t},\r\n\t\tapiPath: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'registro/view',\r\n\t\t},\r\n\t\teditButton: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tdeleteButton: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\texportButton: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\ttitleBeforeDelete: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Eliminar el registro\",\r\n\t\t},\r\n\t\tmsgBeforeDelete: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Grabar eliminado con éxito\",\r\n\t\t},\r\n\t\tmsgAfterDelete: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: \"Grabar eliminado con éxito\",\r\n\t\t},\r\n\t\tshowHeader: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tshowFooter: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true,\r\n\t\t},\r\n\t\tisSubPage: {\r\n\t\t\ttype : Boolean,\r\n\t\t\tdefault : false,\r\n\t\t}\r\n\t});\r\n\tconst app = useApp(props);\r\n\tconst page = useViewPage(props); // page hook\r\n\t//page state\r\n\tconst { \r\n\t\titem, // current record from store - Object\r\n\t\tloading, // api loading state\r\n\t\tpageReady, // api data loaded successfully\r\n\t} = toRefs(page.state);\r\n\t//page computed propties\r\n\tconst {\r\n\t\tapiUrl, // page current api path\r\n\t\tcurrentRecord, // current page record  - Object\r\n\t} = page.computedProps\r\n\t//page methods\r\n\tconst \r\n\t{ \r\n\t\tload, // load data from api\r\n\t\tdeleteItem, // deleted current record\r\n\t\texportPage, // export page records - args = (exportFormats, apiUrl, pageName)\r\n\t\tmoveToNextRecord, // load next record from api\r\n\t\tmoveToPreviousRecord // load previous record from api\r\n\t} = page.methods\r\n\tfunction getActionMenuModel(data){\r\n\t\treturn [\r\n\t\t{\r\n\t\t\tlabel: \"Edit\",\r\n\t\t\tcommand: (event) => { app.openPageDialog({ page:'registro/edit', url: `/registro/edit/${data.id}` , closeBtn: true }) },\r\n\t\t\ticon: \"pi pi-pencil\"\r\n\t\t},\r\n\t\t{\r\n\t\t\tlabel: \"Delete\",\r\n\t\t\tcommand: (event) => { deleteItem(data.id) },\r\n\t\t\ticon: \"pi pi-minus-circle\"\r\n\t\t}\r\n\t]\r\n\t}\r\n\tonMounted(()=>{ \r\n\t\tconst pageTitle = \"Ver\";\r\n\t\tapp.setPageTitle(props.routeName, pageTitle); // set browser page title\r\n\t\tload();\r\n\t});\r\n</script>\r\n<style scoped>\r\n</style>\r\n","import script from \"./view.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./view.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}